<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>VIP Day – Ultra Real Slot (6D)</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700;800&family=Inter:wght@400;600&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#0a0b0f;
    --cab-red:#7a0b11;        /* candy apple base */
    --cab-red-hi:#b51319;     /* highlight */
    --cab-red-lo:#3f0608;     /* shadow */
    --chrome:#cfd7e6;         /* chrome light */
    --chrome-d:#5d6472;       /* chrome dark */
    --glass:#0d0f15cc;        /* smoked glass */
    --neon:#2fffd3;           /* aqua neon */
    --amber:#ffc46b;          /* tungsten bulb */
    --ring:#ffffff26;
    --sym-h:132px;            /* reel symbol height */
    --radius:18px;
  }
  *{box-sizing:border-box}
  body{
    margin:0; min-height:100svh; display:grid; place-items:center;
    background:
      radial-gradient(1400px 800px at 20% -10%, #13324b77, transparent 60%),
      radial-gradient(1200px 700px at 100% 120%, #3b0a0f66, transparent 60%),
      var(--bg);
    color:#eef2ff; font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    padding:24px;
  }

  /* ====== MACHINE CABINET ====== */
  .machine{
    width:min(980px, 96vw);
    border-radius:24px;
    position:relative;
    filter:drop-shadow(0 50px 120px #000a);
    perspective:1200px;
  }
  .cabinet{
    position:relative; padding:18px; border-radius:24px;
    background:
      linear-gradient(145deg, var(--cab-red-hi), var(--cab-red)),
      radial-gradient(120% 100% at 50% -20%, #ffffff14, transparent 60%),
      radial-gradient(120% 100% at 50% 120%, #00000066, transparent 50%);
    border:1px solid #000;
    box-shadow:
      inset 0 2px 0 #ffffff12,
      inset 0 -2px 0 #00000066,
      0 16px 40px #0008;
  }
  .bevel{
    position:absolute; inset:0; border-radius:24px; pointer-events:none;
    background:
      linear-gradient( to bottom, #ffffff22, transparent 40%, transparent 60%, #00000066 ),
      linear-gradient( to right, #ffffff14, transparent 40%, transparent 60%, #00000055 );
    mix-blend-mode:screen;
  }

  /* Top marquee with bulbs */
  .marquee{
    position:relative; height:78px; border-radius:16px;
    background:
      linear-gradient(180deg,#0b0c12,#11131f);
    border:1px solid var(--ring);
    box-shadow:inset 0 0 0 1px #000, 0 8px 26px #000c;
    display:grid; place-items:center;
    overflow:hidden;
  }
  .bulbs{
    position:absolute; inset:8px; display:flex; gap:12px; justify-content:center; align-items:center; flex-wrap:wrap;
  }
  .bulb{
    width:10px; height:10px; border-radius:50%;
    background:radial-gradient(circle at 30% 30%, #fff, #ffcf7d 45%, #a35c00 70%, #0000 72%);
    filter:blur(0.2px) drop-shadow(0 0 6px #ffda8e);
    opacity:.7; animation:twinkle 2.4s infinite ease-in-out;
  }
  .bulb:nth-child(odd){ animation-delay:.6s }
  @keyframes twinkle{ 0%,100%{opacity:.6} 50%{opacity:1} }

  /* Neon title */
  .title{
    font:800 clamp(18px,4vw,28px)/1 Montserrat;
    letter-spacing:.06em; text-transform:uppercase;
    color:#0fffff;
    text-shadow:
      0 0 6px var(--neon),
      0 0 18px var(--neon),
      0 0 36px #71ffe9;
    filter:brightness(1.2);
  }

  /* Mid console (reels + lever), under smoked curved glass */
  .console{
    margin-top:14px; position:relative; border-radius:18px; padding:18px;
    background:
      radial-gradient(120% 80% at 50% 0%, #1c2238, #0e1322 60%, #0a0d17 100%);
    border:1px solid #0f1224;
    box-shadow:inset 0 0 0 1px #000, 0 30px 80px #0009;
    display:grid; gap:16px; align-items:center;
  }
  @media (min-width:980px){
    .console{ grid-template-columns: 1fr 190px; }
  }

  /* Glass glare overlay with curvature */
  .glass{
    pointer-events:none; position:absolute; inset:0; border-radius:18px;
    background:
      radial-gradient(600px 200px at 50% -20%, #ffffff12, transparent 60%),
      linear-gradient( to bottom, #ffffff12, transparent 180px ),
      linear-gradient( to top, #000000aa, transparent 200px );
    mix-blend-mode:screen; opacity:.7;
    mask:
      radial-gradient(120% 120% at 50% -10%, #000 60%, transparent 61%) top/100% 60% no-repeat,
      radial-gradient(120% 120% at 50% 110%, #000 60%, transparent 61%) bottom/100% 60% no-repeat,
      linear-gradient(#000, #000);
  }

  /* Reel window bezel */
  .reel-bezel{
    position:relative; border-radius:14px; padding:12px;
    background:
      linear-gradient(180deg,#0b0c14,#0f1324);
    border:1px solid #0a0c16;
    box-shadow:inset 0 0 0 1px #2a304a, 0 10px 28px #000c;
  }
  .reels{
    display:grid; grid-template-columns:repeat(3,1fr); gap:12px;
    filter:drop-shadow(0 8px 16px #0008);
  }
  .window{
    height:var(--sym-h); overflow:hidden; border-radius:12px;
    background:linear-gradient(180deg,#0a0b13,#0e1326);
    border:1px solid #1a2038; position:relative;
    box-shadow:inset 0 -10px 20px #000a, inset 0 10px 20px #0008;
  }
  .window::after{
    content:""; position:absolute; inset:0; border-radius:12px; pointer-events:none;
    background:
      linear-gradient( to bottom, #ffffff0a, transparent 60% ),
      linear-gradient( to top, #ffffff06, transparent 60% );
    mix-blend-mode:screen;
  }
  .strip{
    display:flex; flex-direction:column; transition:transform 1.1s cubic-bezier(.2,.8,.2,1);
  }
  .sym{
    height:var(--sym-h); display:grid; place-items:center;
    font:800 40px/1 Montserrat; letter-spacing:.02em;
    background:
      radial-gradient(180px 80px at 50% 20%, #ffffff0c, transparent 60%),
      linear-gradient(180deg,#161b32,#0e1224 70%);
    -webkit-text-stroke:1px #000;
    border-bottom:1px solid #05070f;
    color:#ffefb5; text-shadow:0 2px 0 #000, 0 0 14px #ffd86a66;
  }
  .sym.g{ color:#9ee7ff; text-shadow:0 2px 0 #000, 0 0 14px #70e0ff66}
  .sym.p{ color:#ffd86a }
  .sym.r{ color:#ff9bd5 }

  /* Motion blur while spinning */
  .spinning .strip{ filter:blur(0.6px) brightness(1.1) }
  .spinning .window::after{ background:
    linear-gradient(180deg,#ffffff12, transparent 40%),
    linear-gradient(0deg,#ffffff08, transparent 50%);
  }

  /* Lever assembly (chrome) */
  .lever-wrap{ display:grid; place-items:center }
  .lever-base{ position:relative; width:160px; height:240px; perspective:900px; }
  .lever-plate{
    position:absolute; inset:auto 8px 8px 8px; height:110px; border-radius:14px;
    background:
      linear-gradient(180deg, #232948, #0e1224);
    border:1px solid #0b0e1b; box-shadow:inset 0 0 0 1px #2a304a, 0 8px 26px #000a;
  }
  .lever-slot{
    position:absolute; left:50%; top:14px; transform:translateX(-50%);
    width:18px; height:72px; border-radius:999px;
    background:linear-gradient(180deg,#0a0b18,#060713); border:1px solid #000;
    box-shadow:inset 0 -8px 14px #0008, inset 0 10px 10px #ffffff09;
  }
  .lever-arm{
    position:absolute; left:50%; bottom:96px; transform:translateX(-50%) rotateX(0deg) rotateZ(0deg);
    transform-origin:50% 100%; transition:transform .18s cubic-bezier(.2,.8,.2,1);
    width:28px; height:168px; cursor:grab;
  }
  .lever-arm:active{ cursor:grabbing }
  .lever-stick{
    position:absolute; left:50%; bottom:46px; transform:translateX(-50%);
    width:9px; height:104px; border-radius:6px;
    background:
      linear-gradient(90deg,#1b2036, #a6b7ff55 30%, #1b2036 60%, #9fb4ff33 90%),
      linear-gradient(180deg,#6a748a,#1c2238 70%);
    box-shadow: inset 0 0 0 1px #ffffff22, 0 10px 14px #0008;
  }
  .lever-knob{
    position:absolute; left:50%; bottom:0; transform:translateX(-50%);
    width:64px; height:64px; border-radius:50%;
    background:
      radial-gradient(circle at 32% 28%, #ffffffcc 0 6%, transparent 7%),
      radial-gradient(circle at 36% 36%, #ffffff55 0 22%, transparent 24%),
      radial-gradient(circle at 72% 78%, #00000088 0 34%, transparent 36%),
      radial-gradient(circle at 50% 70%, #ff5f5f33 0 42%, transparent 44%),
      linear-gradient(180deg, #f04b53, #8b161a 70%, #460a0c);
    border:1px solid #ffffff22; box-shadow:0 16px 26px #000a, inset 0 0 40px #ffffff18;
  }
  .knob-gloss{ position:absolute; inset:0; border-radius:50%;
    background:radial-gradient(130px 70px at 50% 18%, #ffffff22, transparent 60%); mix-blend-mode:screen }
  .lever-shadow{
    position:absolute; left:50%; bottom:90px; transform:translateX(-50%);
    width:110px; height:20px; border-radius:999px;
    background:radial-gradient(closest-side, #000b, transparent); filter:blur(4px); opacity:.9;
  }
  .lever-arm.pull{ transform:translateX(-50%) rotateX(30deg) rotateZ(-5deg) }
  .lever-hint{ margin-top:6px; font:700 12px/1 Montserrat; color:#9bb2ff; letter-spacing:.14em; text-transform:uppercase; opacity:.85 }

  /* Belly glass (voucher panel) */
  .belly{
    margin-top:14px; position:relative; border-radius:16px; padding:16px;
    background:
      linear-gradient(180deg, #131829, #0c0f1f 60%, #0a0c18),
      radial-gradient(120% 80% at 50% -20%, #ffffff0a, transparent 60%);
    border:1px solid #0f1326; box-shadow:inset 0 0 0 1px #2a304a, 0 16px 40px #000c;
  }
  .belly::after{
    content:""; position:absolute; inset:0; border-radius:16px; pointer-events:none;
    background:linear-gradient( to bottom, #ffffff12, transparent 40% );
    mix-blend-mode:screen; opacity:.7;
  }

  /* Buttons and status */
  .controls{ display:flex; gap:10px; justify-content:center; flex-wrap:wrap }
  .btn{
    appearance:none; border:0; padding:12px 18px; border-radius:12px; cursor:pointer;
    font:800 14px/1 Montserrat; letter-spacing:.06em; text-transform:uppercase; color:#0b0b16;
    background:linear-gradient(90deg,#ffd36b,#ff7f50); box-shadow:0 10px 22px #0009;
  }
  .btn:disabled{opacity:.6; cursor:not-allowed}
  .subbtn{ background:linear-gradient(180deg,#252a48,#171b33); color:#e6ecff; border:1px solid #2a304a }

  .status{text-align:center; min-height:28px; font-weight:600; color:#cfd6ff}
  .result{text-align:center; margin-top:6px; font:800 clamp(16px,3.5vw,20px)/1 Montserrat; letter-spacing:.02em}

  .voucher{ margin-top:10px; display:none; grid-template-columns:1fr auto; gap:8px; align-items:center }
  .code{
    background:#0b0c16; border:1px dashed #41508a; padding:10px 12px; border-radius:12px; text-align:center;
    font:800 14px/1.1 Montserrat; letter-spacing:.08em; color:#a9d2ff; word-break:break-all
  }
  .copy{ background:linear-gradient(180deg,#2a314f,#1b2140); color:#fff; border:1px solid #2a304a }

  /* Confetti */
  .confetti{ position:absolute; inset:0; pointer-events:none }
</style>
</head>
<body>
  <div class="machine">
    <div class="cabinet">
      <div class="bevel"></div>

      <!-- MARQUEE -->
      <div class="marquee">
        <div class="bulbs" id="bulbs"></div>
        <div class="title">High Roller Slots</div>
      </div>

      <!-- CONSOLE -->
      <div class="console" id="console">
        <div class="reel-bezel">
          <div class="reels" id="reels">
            <div class="window"><div class="strip" id="s1"></div></div>
            <div class="window"><div class="strip" id="s2"></div></div>
            <div class="window"><div class="strip" id="s3"></div></div>
          </div>
        </div>

        <!-- 3D LEVER -->
        <div class="lever-wrap">
          <div class="lever-base">
            <div class="lever-plate"><div class="lever-slot"></div></div>
            <div class="lever-arm" id="leverArm" title="Pull to play">
              <div class="lever-stick"></div>
              <div class="lever-knob"><div class="knob-gloss"></div></div>
            </div>
            <div class="lever-shadow"></div>
          </div>
          <div class="lever-hint">Pull to play</div>
        </div>

        <div class="glass"></div>
      </div>

      <!-- BELLY GLASS / VOUCHER -->
      <div class="belly">
        <div class="controls">
          <button class="btn" id="spinBtn">Pull Lever</button>
          <button class="btn subbtn" id="refreshBtn">Refresh</button>
        </div>
        <div class="status" id="status">Ready. Good luck!</div>
        <div class="result" id="result"></div>
        <div class="voucher" id="voucherBox">
          <div class="code" id="voucherCode">VIPDAY-XXXX</div>
          <button class="btn copy" id="copyBtn">Copy</button>
        </div>
      </div>

      <canvas class="confetti" id="confetti"></canvas>
    </div>
  </div>

<script>
/* ================== CONFIG ================== */
const REWARDS = {
  '⭐': { id:'FS50', label:'50 Free Spins' },
  '💎': { id:'T2',   label:'2 Lucky Sweet Spins' },
  '7':  { id:'BON',  label:'Bonus 50 (x5 WR)' },
  '🍀': { id:'FS20', label:'20 Free Spins' },
  '🔔': { id:'T1',   label:'1 Lucky Sweet Spin' },
};
const SYMBOLS = ['⭐','💎','7','🍀','🔔'];
const CLAIM_KEY = 'vipday_slot_claim_' + new Date().toISOString().slice(0,10); // per-day lock

/* ================= UTILITIES ================= */
const $ = s => document.querySelector(s);
function randInt(min,max){ return Math.floor(Math.random()*(max-min+1))+min }
function pad(n){ return n.toString().padStart(2,'0') }
function yyyymmdd(d=new Date()){ return d.getFullYear()+pad(d.getMonth()+1)+pad(d.getDate()) }
function randomCode(len=6){ const c='ABCDEFGHJKLMNPQRSTUVWXYZ23456789'; let s=''; for(let i=0;i<len;i++) s+=c[randInt(0,c.length-1)]; return s; }
function generateVoucher(id){ return `VIPDAY-${yyyymmdd()}-${id}-${randomCode(6)}` }
function alreadyClaimed(){ return localStorage.getItem(CLAIM_KEY)==='1' }
function setClaimed(){ localStorage.setItem(CLAIM_KEY,'1') }
function statusMsg(m, t){
  const el=$('#status'); el.textContent=m;
  el.style.color = t==='ok'?'#28c76f': t==='warn'?'#ffc46b': t==='err'?'#ff6b6b':'#cfd6ff';
}

/* =============== BUILD MARQUEE BULBS =============== */
(function(){
  const bulbs = $('#bulbs');
  for(let i=0;i<36;i++){
    const b=document.createElement('div'); b.className='bulb'; bulbs.appendChild(b);
  }
})();

/* =============== CONFETTI =============== */
const confetti = $('#confetti'); const ctx = confetti.getContext('2d');
function resizeCanvas(){ confetti.width = confetti.clientWidth; confetti.height = confetti.clientHeight; }
addEventListener('resize', resizeCanvas); resizeCanvas();
let confettiPieces=[];
function burst(){
  confettiPieces.length = 160;
  for(let i=0;i<confettiPieces.length;i++){
    confettiPieces[i]={ x: confetti.width/2, y: confetti.height/3, r: Math.random()*6+2,
      vx:(Math.random()-0.5)*6, vy:Math.random()*-6-2, g:0.16+Math.random()*0.22, life:80+Math.random()*40 };
  }
}
(function tick(){
  ctx.clearRect(0,0,confetti.width,confetti.height);
  confettiPieces.forEach(p=>{
    p.vy+=p.g; p.x+=p.vx; p.y+=p.vy; p.life-=1;
    ctx.globalAlpha=Math.max(p.life/120,0);
    ctx.fillStyle = Math.random()<.5 ? '#ffd36b' : '#2fffd3';
    ctx.beginPath(); ctx.arc(p.x,p.y,p.r,0,Math.PI*2); ctx.fill();
  });
  confettiPieces = confettiPieces.filter(p=>p.life>0 && p.y<confetti.height+20);
  requestAnimationFrame(tick);
})();

/* =============== BUILD REELS =============== */
const r1 = $('#s1'), r2 = $('#s2'), r3 = $('#s3');
function buildStrips(){
  [r1,r2,r3].forEach(strip=>{
    strip.innerHTML='';
    const tall = SYMBOLS.concat(SYMBOLS, SYMBOLS, SYMBOLS);
    tall.forEach(sym=>{
      const d=document.createElement('div');
      d.className='sym ' + (sym==='⭐'?'p':sym==='💎'?'g':sym==='7'?'r':'');
      d.textContent=sym; strip.appendChild(d);
    });
  });
}
buildStrips();

/* =============== SPIN FLOW =============== */
let spinning=false;
function disable(v){ $('#spinBtn').disabled=v; }
function spin(){
  if(spinning) return;
  if(alreadyClaimed()){ statusMsg('You already claimed today. Come back tomorrow.','warn'); return; }
  spinning=true; disable(true);
  statusMsg('Spinning…'); $('#result').textContent=''; $('#voucherBox').style.display='none';
  $('#console').classList.add('spinning');

  // Choose symbol (uniform; can weight later)
  const chosen = SYMBOLS[randInt(0,SYMBOLS.length-1)];
  const stopIndexBase = randInt(8,11);
  const stops = [stopIndexBase, stopIndexBase+1, stopIndexBase+2].map(n=>n + randInt(0,2));
  const strips=[r1,r2,r3];

  strips.forEach((strip,i)=>{
    const symbols = Array.from(strip.children);
    let target = stops[i] % symbols.length;
    for(let k=0;k<symbols.length;k++){
      const idx=(target+k)%symbols.length;
      if(symbols[idx].textContent===chosen){ target=idx; break; }
    }
    const h = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--sym-h'));
    const y = -target*h;
    strip.style.transitionDuration = (1+i*0.24)+'s';
    requestAnimationFrame(()=>{ strip.style.transform=`translateY(${y}px)`; });
  });

  const totalTime = 1 + 0.24*2 + 0.2; // last reel + small buffer
  setTimeout(()=>{ showReward(chosen); }, totalTime*1000);
}
function showReward(sym){
  $('#console').classList.remove('spinning');
  const reward = REWARDS[sym];
  if(!reward){ statusMsg('No reward mapping found. Try again.','err'); spinning=false; disable(false); return; }
  const code = generateVoucher(reward.id);
  $('#result').textContent = `🎉 You won: ${reward.label}`;
  $('#voucherCode').textContent = code;
  $('#voucherBox').style.display='grid';
  statusMsg('Jackpot feeling! Code generated.','ok');
  burst();
  setClaimed();
  spinning=false; disable(false);

  // Optional server call
  // fetch('https://YOUR-API/claim', {
  //   method:'POST', headers:{'Content-Type':'application/json'},
  //   body: JSON.stringify({ game:'slot-6d', date:new Date().toISOString().slice(0,10), rewardId: reward.id, code })
  // });
}

/* =============== BUTTONS + COPY =============== */
$('#spinBtn').addEventListener('click', spin);
$('#refreshBtn').addEventListener('click', ()=>location.reload());
$('#copyBtn').addEventListener('click', ()=>{
  const t=$('#voucherCode').textContent.trim();
  navigator.clipboard.writeText(t).then(()=>statusMsg('Code copied ✓','ok'));
});

/* =============== 3D LEVER INTERACTION =============== */
(function(){
  const arm = $('#leverArm');
  const consoleEl = $('#console');
  let pulling = false, startY = 0, pulled = false, locked = false;

  function setArm(pull){
    arm.classList.toggle('pull', pull);
  }
  function fireSpin(){
    if(locked) return; locked=true;
    try{ if(navigator.vibrate) navigator.vibrate(12); }catch(_){}
    setArm(true); setTimeout(()=>setArm(false), 280);
    spin();
    setTimeout(()=>{ locked=false; }, 1800);
  }
  function onDown(e){
    if(locked) return;
    pulling=true; pulled=false; startY=(e.touches?e.touches[0].clientY:e.clientY);
  }
  function onMove(e){
    if(!pulling || locked) return;
    const y=(e.touches?e.touches[0].clientY:e.clientY);
    const delta=Math.max(0, Math.min(90, y-startY));
    const ratio=delta/90;
    arm.style.transition='none';
    arm.style.transform=`translateX(-50%) rotateX(${ratio*30}deg) rotateZ(${-ratio*5}deg)`;
    if(ratio>.88) pulled=true;
  }
  function onUp(){
    if(!pulling) return;
    pulling=false; arm.style.transition=''; arm.style.transform='';
    if(pulled) fireSpin();
  }
  arm.addEventListener('click', ()=>{ if(!pulling) fireSpin(); });
  arm.addEventListener('mousedown', onDown);
  window.addEventListener('mousemove', onMove);
  window.addEventListener('mouseup', onUp);
  arm.addEventListener('touchstart', onDown, {passive:true});
  window.addEventListener('touchmove', onMove, {passive:true});
  window.addEventListener('touchend', onUp);
})();
</script>
</body>
</html>
