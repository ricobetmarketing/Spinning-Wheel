<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>VIP Day â€¢ Mini Roulette</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700;800&family=Inter:wght@400;600&display=swap" rel="stylesheet">
<style>
  :root{
    --g1:#ff6ec4; --g2:#7873f5; --bg:#0e0f23; --card:#111228; --ring:#ffffff24;
    --tx:#f2f3ff; --mut:#cfd0ff; --ok:#28c76f; --warn:#ffe46b; --err:#ff6b6b;
    --radius:16px;
  }
  *{box-sizing:border-box}
  body{
    margin:0; min-height:100svh; display:grid; place-items:center; padding:20px;
    color:var(--tx);
    background:radial-gradient(1000px 600px at 0% -10%, #ff6ec444, transparent),
               radial-gradient(1000px 600px at 100% 110%, #7873f544, transparent),
               var(--bg);
    font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  }
  .card{width:min(720px,96vw); background:linear-gradient(180deg,#12132a,#0e0f23);
    border:1px solid var(--ring); border-radius:var(--radius); padding:18px;
    box-shadow:0 20px 60px #0009, inset 0 0 0 1px #ffffff12; position:relative; overflow:hidden}
  h1{font:800 clamp(20px,4vw,28px)/1.1 Montserrat; margin:6px 0 2px;
    background:linear-gradient(90deg,var(--g1),var(--g2)); -webkit-background-clip:text; color:transparent}
  p.lead{margin:0 0 14px; color:var(--mut)}
  .wheelWrap{display:grid; place-items:center; margin:8px 0 14px}
  .wheel{
    width:min(480px,88vw); aspect-ratio:1/1; border-radius:50%;
    background:
      radial-gradient(circle at 50% 50%, #0a0b18 0 44%, transparent 44%),
      conic-gradient(
        from -15deg,
        #1a1f4f 0 30deg, #2a2f63 30deg 60deg, #1a1f4f 60deg 90deg,
        #2a2f63 90deg 120deg, #1a1f4f 120deg 150deg, #2a2f63 150deg 180deg,
        #1a1f4f 180deg 210deg, #2a2f63 210deg 240deg, #1a1f4f 240deg 270deg,
        #2a2f63 270deg 300deg, #1a1f4f 300deg 330deg, #2a2f63 330deg 360deg
      );
    border:2px solid #ffffff22; box-shadow:0 20px 40px #000a, inset 0 0 40px #000;
    position:relative; transition:transform 4s cubic-bezier(.12,.7,.07,1); transform:rotate(0deg);
  }
  .wheel::before{
    content:""; position:absolute; inset:6% 6% auto 6%; height:6%;
    background:linear-gradient(90deg,var(--g1),var(--g2));
    border-radius:999px; filter:blur(10px); opacity:.4;
    top:50%; transform:translateY(-50%);
  }
  .labels{
    position:absolute; inset:0; display:grid; place-items:center; pointer-events:none;
    font:700 12px/1 Montserrat; color:#fff;
  }
  .labels span{
    position:absolute; transform-origin:50% 200px; translate:0 18px;
    text-shadow:0 2px 6px #0009;
  }
  .needle{
    width:0; height:0; border-left:14px solid transparent; border-right:14px solid transparent;
    border-bottom:24px solid #ffe46b; filter:drop-shadow(0 6px 10px #000);
    margin-inline:auto; translate:0 -6px;
  }
  .controls{display:flex; gap:10px; flex-wrap:wrap; align-items:center; justify-content:center}
  .btn{
    appearance:none; border:0; padding:12px 18px; border-radius:12px; cursor:pointer; color:#0b0b16;
    font:800 14px/1 Montserrat; letter-spacing:.06em; text-transform:uppercase;
    background:linear-gradient(90deg,var(--g1),var(--g2)); box-shadow:0 8px 18px #0007;
  }
  .btn:disabled{opacity:.6; cursor:not-allowed}
  .subbtn{ background:#1b1e3c; color:var(--tx); border:1px solid #ffffff14; box-shadow:none }
  .status{text-align:center; min-height:28px; font-weight:600; color:var(--mut)}
  .result{text-align:center; margin-top:8px; font-weight:800; font-family:Montserrat; font-size:clamp(16px,3.5vw,20px)}
  .voucher{ margin-top:10px; display:none; grid-template-columns:1fr auto; gap:8px; align-items:center }
  .code{ background:#0b0c1a; border:1px dashed #ffffff33; padding:10px 12px; border-radius:12px; text-align:center; font:800 14px/1.1 Montserrat; letter-spacing:.08em; color:#a4e0ff; word-break:break-all}
  .copy{ background:#212549; color:#fff; border:1px solid #ffffff22 }
</style>
</head>
<body>
  <div class="card">
    <h1>VIP Mini Roulette</h1>
    <p class="lead">Spin the wheel to reveal your VIP Day reward. One claim per day.</p>

    <div class="needle"></div>
    <div class="wheelWrap">
      <div class="wheel" id="wheel">
        <div class="labels" id="labels"></div>
      </div>
    </div>

    <div class="controls">
      <button class="btn" id="spin">Spin</button>
      <button class="btn subbtn" id="refresh">Refresh</button>
    </div>
    <div class="status" id="status">Ready to spin.</div>
    <div class="result" id="result"></div>

    <div class="voucher" id="voucherBox">
      <div class="code" id="voucherCode">VIPDAY-XXXX</div>
      <button class="btn copy" id="copyBtn">Copy</button>
    </div>
    <div class="status tiny" style="text-align:center;color:#98a0ff;margin-top:8px">Keep your code safe. Codes are case sensitive.</div>
  </div>

<script>
/* -------- CONFIG -------- */
const SEGMENTS = [
  { id:'FS20', label:'20 FS' },
  { id:'T1',   label:'1 Ticket' },
  { id:'BON',  label:'Bonus R$50' },
  { id:'FS50', label:'50 FS' },
  { id:'T2',   label:'2 Tickets' },
  { id:'FS20', label:'20 FS' },
  { id:'T1',   label:'1 Ticket' },
  { id:'BON',  label:'Bonus R$50' },
  { id:'FS50', label:'50 FS' },
  { id:'T2',   label:'2 Tickets' },
  { id:'FS20', label:'20 FS' },
  { id:'T1',   label:'1 Ticket' }
];
const CLAIM_KEY = 'vipday_roulette_claim_' + new Date().toISOString().slice(0,10); // YYYY-MM-DD

/* ------- BUILD LABELS ------ */
const labels = document.getElementById('labels');
const wheel = document.getElementById('wheel');
SEGMENTS.forEach((seg,i)=>{
  const span=document.createElement('span');
  const angle = (360/SEGMENTS.length)*i + (360/SEGMENTS.length)/2; // center of segment
  span.style.transform = `rotate(${angle}deg) translateY(-170px) rotate(${-angle}deg)`;
  span.textContent = seg.label;
  labels.appendChild(span);
});

/* ------- UTILITIES ------- */
function pad(n){return n.toString().padStart(2,'0')}
function yyyymmdd(d=new Date()){ return d.getFullYear()+pad(d.getMonth()+1)+pad(d.getDate()) }
function randomCode(len=6){
  const chars='ABCDEFGHJKLMNPQRSTUVWXYZ23456789';
  let s=''; for(let i=0;i<len;i++) s+=chars[Math.floor(Math.random()*chars.length)];
  return s;
}
function generateVoucher(rewardId){
  return `VIPDAY-${yyyymmdd()}-${rewardId}-${randomCode(6)}`;
}
function alreadyClaimed(){ return localStorage.getItem(CLAIM_KEY)==='1' }
function setClaimed(){ localStorage.setItem(CLAIM_KEY,'1') }
function statusMsg(msg,type){
  const el=document.getElementById('status'); el.textContent=msg;
  el.style.color = type==='ok' ? '#28c76f' : type==='warn' ? '#ffe46b' : type==='err' ? '#ff6b6b' : 'var(--mut)';
}

/* -------- SPIN LOGIC ------- */
let spinning=false, currentRot=0;
document.getElementById('spin').addEventListener('click', ()=>{
  if(spinning) return;
  if(alreadyClaimed()){ statusMsg('You already claimed today. Come back tomorrow.','warn'); return; }
  spinning=true; statusMsg('Spinningâ€¦'); document.getElementById('result').textContent='';
  document.getElementById('voucherBox').style.display='none';

  const rounds = 5 + Math.random()*2; // base rotations
  const targetIndex = Math.floor(Math.random()*SEGMENTS.length);
  const segAngle = 360/SEGMENTS.length;
  const targetAngleFromTop = 360 - (targetIndex*segAngle + segAngle/2); // align needle to segment center
  const finalRot = rounds*360 + targetAngleFromTop + (Math.random()*6-3); // slight jitter
  currentRot = (currentRot + finalRot) % 360;
  wheel.style.transitionDuration = '4s';
  wheel.style.transform = `rotate(${currentRot}deg)`;

  setTimeout(()=>{
    const seg = SEGMENTS[targetIndex];
    const labelMap = {
      'FS20':'20 Free Spins',
      'T1':'1 Lucky Sweet Spin',
      'BON':'Bonus R$50 (x5 WR)',
      'FS50':'50 Free Spins',
      'T2':'2 Lucky Sweet Spins'
    };
    document.getElementById('result').textContent = `ðŸŽ‰ You won: ${labelMap[seg.id] || seg.label}`;
    const code = generateVoucher(seg.id);
    document.getElementById('voucherCode').textContent = code;
    document.getElementById('voucherBox').style.display='grid';
    statusMsg('Congratulations!','ok');
    setClaimed();

    // Optional: POST claim to your server
    // fetch('https://YOUR-API/claim', {
    //   method:'POST',
    //   headers:{'Content-Type':'application/json'},
    //   body: JSON.stringify({ game:'roulette', date:new Date().toISOString().slice(0,10), rewardId: seg.id, code })
    // });

    spinning=false;
  }, 4100);
});
document.getElementById('refresh').addEventListener('click',()=>location.reload());
document.getElementById('copyBtn').addEventListener('click',()=>{
  const t=document.getElementById('voucherCode').textContent.trim();
  navigator.clipboard.writeText(t).then(()=>statusMsg('Code copied âœ“','ok'));
});
</script>
</body>
</html>
