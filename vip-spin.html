<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>RicoBet VIP ‚Äì Spin</title>
<style>
  :root{
    --bg:#0e0f23; --card:#111228; --ring:rgba(255,255,255,.12);
    --text:#f2f3ff; --dim:#b9baf5; --a1:#ff6ec4; --a2:#7873f5; --warn:#ffe600;
    --glow1:rgba(120,115,245,.55); --glow2:rgba(255,110,196,.45);
  }
  *{box-sizing:border-box}
  body{margin:0; font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; background:var(--bg); color:var(--text)}
  .wrap{max-width:560px; margin:0 auto; padding:20px 14px}
  .card{background:var(--card); border:1px solid var(--ring); border-radius:16px; box-shadow:0 8px 32px rgba(0,0,0,.45); padding:16px; text-align:center; position:relative; overflow:hidden}

  .card:before{content:""; position:absolute; inset:-30%; background:conic-gradient(from 0deg, rgba(255,110,196,.08), rgba(120,115,245,.08), transparent 30%); animation:spinBg 18s linear infinite; filter:blur(40px)}
  @keyframes spinBg{to{transform:rotate(360deg)}}

  h1{margin:6px 0 4px; font-size:1.2rem}
  .grad{background:linear-gradient(90deg,var(--a1),var(--a2),var(--a1)); -webkit-background-clip:text; background-clip:text; color:transparent; background-size:200% 100%; animation:shimmer 3s linear infinite}
  @keyframes shimmer{to{background-position:100% 50%}}
  .sub{margin:0 10px 14px; color:var(--dim)}

  .spinbtn{display:inline-block; padding:12px 20px; border-radius:999px; font-weight:800; color:#0e0f23; text-decoration:none; background:linear-gradient(90deg,var(--a1),var(--a2)); box-shadow:0 0 14px var(--glow1), 0 0 22px var(--glow2); position:relative; overflow:hidden}
  .spinbtn:after{content:""; position:absolute; inset:0; background:linear-gradient(120deg, transparent, rgba(255,255,255,.25), transparent); transform:translateX(-120%); animation:shine 2.2s ease-in-out infinite}
  @keyframes shine{to{transform:translateX(120%)}}
  .spinbtn:hover{filter:brightness(1.08)}
  .spinbtn:active{transform:scale(.96)}
  .spinbtn[disabled]{opacity:.7; pointer-events:none}

  .wrapspin{--W:min(80vw,320px); position:relative; display:grid; place-items:center; padding:12px 8px}

  /* TOP POINTER pointing DOWN */
  .pointer{position:absolute; top:calc(50% - (var(--W)/2) - 2px); left:50%; transform:translateX(-50%); z-index:5}
  .pointer .head{width:0; height:0; border-left:14px solid transparent; border-right:14px solid transparent; border-bottom:20px solid var(--warn)}

  /* WHEEL */
  .wheel{position:relative; z-index:1; width:var(--W); height:var(--W); border-radius:50%; background:radial-gradient(closest-side, rgba(0,0,0,.18), transparent 60%), conic-gradient(from 0deg,#262a59 0 25%, #2f3369 0 50%, #262a59 0 75%, #2f3369 0 100%); border:10px solid #0f1128; box-shadow:inset 0 0 0 3px #1d1f42, 0 10px 26px rgba(0,0,0,.55); transition: transform 3s cubic-bezier(.22,.61,.36,1)}
  .wheel:before{content:""; position:absolute; inset:10px; border-radius:50%; background:repeating-conic-gradient(from 0deg, rgba(255,255,255,.06) 0 2deg, transparent 2deg 6deg); mask: radial-gradient(circle at 50% 50%, transparent 68%, #000 69%)}

  /* Labels wedge-oriented (like screenshot) */
  .labwrap{position:absolute; inset:0; z-index:2; pointer-events:none}
 .lab{
  position:absolute; left:50%; top:50%; transform-origin:center;
  font-size:14px; font-weight:700; color:#ffffff;
  text-shadow:0 1px 2px rgba(0,0,0,.6);
  --r: calc(var(--W) * .38);   /* 38% of wheel width ‚âà close to rim */
}
  .lab.a{transform:translate(-50%,-50%) rotate(0deg) translateY(calc(-1 * var(--r)));}
  .lab.b{transform:translate(-50%,-50%) rotate(90deg) translateY(calc(-1 * var(--r)));}
  .lab.c{transform:translate(-50%,-50%) rotate(180deg) translateY(calc(-1 * var(--r)));}
  .lab.d{transform:translate(-50%,-50%) rotate(270deg) translateY(calc(-1 * var(--r)));}

  /* Center mascot */
  .center{position:absolute; z-index:3; left:50%; top:50%; transform:translate(-50%,-50%); width:calc(var(--W)*.34); height:calc(var(--W)*.34); max-width:130px; max-height:130px; border-radius:50%; background:#0f1128; display:grid; place-items:center; overflow:hidden; box-shadow:0 0 0 4px #0f1128, 0 6px 16px rgba(0,0,0,.45)}
  .center img{width:100%; height:100%; object-fit:cover}

  .reveal{opacity:0; visibility:hidden; margin-top:12px; border:1px dashed var(--ring); border-radius:12px; background:#10122b; padding:14px; transition:opacity .3s ease, visibility 0s linear}
  .reveal.show{opacity:1; visibility:visible; animation:bounceIn .6s ease}
  @keyframes bounceIn{0%{opacity:0;transform:scale(.86) translateY(22px)}60%{opacity:1;transform:scale(1.08) translateY(-6px)}100%{transform:scale(1) translateY(0)}}

  .codebox{display:flex; gap:8px; align-items:center; flex-wrap:wrap}
  .codebox .label{flex:0 0 auto; font-size:.96rem}
  .code{flex:1 1 220px; min-width:180px; padding:10px; border-radius:10px; border:1px solid var(--ring); background:#0f1128; color:#f2f3ff; font-family:ui-monospace,Menlo,Consolas,monospace; font-size:1rem}
  .copy{flex:0 0 auto; cursor:pointer; border:0; border-radius:999px; padding:10px 14px; font-weight:800; background:linear-gradient(90deg,var(--a1),var(--a2)); color:#0e0f23; transition:transform .2s}
  .copy:hover{transform:scale(1.08)}
  .note{margin-top:6px; color:var(--dim); font-size:.85rem}
  .ok{display:none; color:#1dd1a1}

  .cfx{pointer-events:none; position:absolute; inset:0; overflow:hidden; z-index:4; display:none}
  .card.spinning .cfx{display:block}
  .cfx i{position:absolute; top:-10px; width:8px; height:12px; border-radius:2px; opacity:.95; background:var(--conf,#fff); transform:translateY(-20px) rotate(0deg); animation:fall 1.4s ease forwards; box-shadow:0 0 8px rgba(0,0,0,.25)}
  @keyframes fall{to{transform:translateY(220px) rotate(360deg); opacity:.98}}
</style>
</head>
<body>
  <div class="wrap">
    <div class="card" id="card" data-done="0">
      <h1><span class="grad">VIP Day</span> ‚Äì Spin the Wheel üé°</h1>
      <p class="sub">Click <strong>‚ÄúSpin Now‚Äù</strong> to reveal your mission code.</p>

      <a href="#" class="spinbtn" id="spinBtn">Spin Now</a>

      <div class="wrapspin" aria-hidden="true">
        <div class="pointer" aria-hidden="true"><div class="head"></div></div>

        <div class="wheel" role="img" aria-label="Prize wheel with four segments">
          <div class="labwrap" aria-hidden="true">
            <div class="lab a">Free Spins</div>
            <div class="lab b">Lucky Ticket</div>
            <div class="lab c">VIP Bonus</div>
            <div class="lab d">Mystery</div>
          </div>
        </div>

        <div class="center" aria-hidden="true">
          <img src="https://ricobr.ft-crm.com/media-api/serve/bf044a19-0484-47be-983e-a8416d340e65_Mascot.gif" alt="Mascot">
        </div>
        <div class="cfx" id="cfx"></div>
      </div>

      <div class="reveal" id="reveal" aria-live="polite">
        <div class="codebox">
          <span class="label" id="outcomeLabel">üéâ Your VIP code:</span>
          <input class="code" id="code" type="text" value="" readonly>
          <button class="copy" id="copyBtn">Copy</button>
        </div>
        <div class="note"><span class="tip">Tap Copy or long-press to copy.</span> <span class="ok" id="copied">Copied ‚úî</span></div>
      </div>
    </div>
  </div>
<script>
(function(){
  var card=document.getElementById('card');
  var btn=document.getElementById('spinBtn');
  var rev=document.getElementById('reveal');
  var cfx=document.getElementById('cfx');
  var codeEl=document.getElementById('code');
  var copy=document.getElementById('copyBtn');
  var copied=document.getElementById('copied');
  var wheel=document.querySelector('.wheel');
  var outcomeLabel=document.getElementById('outcomeLabel');

  // Map codes -> visible labels & final angles under top pointer (downwards)
  var OUTCOMES=[
    {code:'AURA',  name:'Lucky Ticket', center:  90},
    {code:'VSTAR', name:'Free Spins',   center:   0},
    {code:'CHAMP', name:'VIP Bonus',    center: 180},
    {code:'VIPGO', name:'Mystery',      center: 270}
  ];

  // One-time per browser/device using localStorage
  var KEY_DONE='rb_vip_spin_done_202509';
  var KEY_CODE='rb_vip_spin_code_202509';
  var KEY_IDX ='rb_vip_spin_idx_202509';

  // If already spun, restore state and block button
  try{
    if(localStorage.getItem(KEY_DONE)==='1'){
      var savedCode=localStorage.getItem(KEY_CODE)||'';
      var savedIdx=parseInt(localStorage.getItem(KEY_IDX)||'-1',10);
      if(savedCode && savedIdx>=0 && OUTCOMES[savedIdx]){
        var finalDeg=OUTCOMES[savedIdx].center;
        if(wheel){ wheel.style.transform='rotate('+finalDeg+'deg)'; }
        codeEl.value=savedCode;
        outcomeLabel.textContent='üéâ '+OUTCOMES[savedIdx].name+' ‚Äî your VIP code:';
        rev.classList.add('show');
        if(btn) btn.style.display='none';
        card.setAttribute('data-done','1');
      }
    }
  }catch(e){}

  function confetti(){
    if(!cfx) return;
    cfx.innerHTML='';
    var colors=['#ff6ec4','#7873f5','#ffe600','#1dd1a1','#ffffff'];
    for(var i=0;i<36;i++){
      var s=document.createElement('i');
      s.style.left=(5+Math.random()*90)+'%';
      s.style.setProperty('--conf',colors[(Math.random()*colors.length)|0]);
      s.style.animationDelay=(Math.random()*0.4)+'s';
      cfx.appendChild(s);
    }
  }

  function pickRandomIndex(){ return Math.floor(Math.random()*OUTCOMES.length); }

  function spinTo(index){
    var turns=4+Math.floor(Math.random()*3);              // 4‚Äì6 full turns
    var base=turns*360+OUTCOMES[index].center;            // final align at pointer
    var over=base+16;                                     // slight overshoot

    wheel.style.transition='transform 2.4s cubic-bezier(.22,.61,.36,1)';
    wheel.style.transform='rotate('+over+'deg)';

    setTimeout(function(){
      wheel.style.transition='transform .6s cubic-bezier(.25,.9,.25,1)';
      wheel.style.transform='rotate('+base+'deg)';
    },2400);

    setTimeout(function(){ reveal(index); },3100);
  }

  function reveal(index){
    var o=OUTCOMES[index];
    codeEl.value=o.code;
    outcomeLabel.textContent='üéâ '+o.name+' ‚Äî your VIP code:';
    rev.classList.add('show');
    card.setAttribute('data-done','1');
    try{
      localStorage.setItem(KEY_DONE,'1');
      localStorage.setItem(KEY_CODE,o.code);
      localStorage.setItem(KEY_IDX,String(index));
    }catch(e){}
  }

  if(btn){
    btn.addEventListener('click',function(e){
      e.preventDefault();
      if(card.getAttribute('data-done')==='1') return;   // guard
      btn.setAttribute('disabled','disabled');
      confetti();
      var idx=pickRandomIndex();
      spinTo(idx);
    });
  }

  if(copy){
    copy.addEventListener('click',function(){
      codeEl.select();
      try{ document.execCommand('copy'); copied.style.display='inline'; setTimeout(function(){copied.style.display='none';},1500); }catch(e){}
    });
  }
})();
</script>
</body>
</html>
